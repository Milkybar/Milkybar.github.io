var module_math;!function(e){var r=function(){function e(e){this.v=new Float32Array(3),this.v[0]=e[0],this.v[1]=e[1],this.v[2]=e[2]}return Object.defineProperty(e.prototype,"x",{get:function(){return this.v[0]},set:function(e){this.v[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.v[1]},set:function(e){this.v[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.v[2]},set:function(e){this.v[2]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xyz",{get:function(){return[this.v[0],this.v[1],this.v[2]]},set:function(e){this.v[0]=e[0],this.v[1]=e[1],this.v[2]=e[2]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"len_sqrd",{get:function(){var e=this.x,r=this.y,t=this.z;return e*e+r*r+t*t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"len",{get:function(){return Math.sqrt(this.len_sqrd)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"zero",{get:function(){return new e([0,0,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"one",{get:function(){return new e([1,1,1])},enumerable:!0,configurable:!0}),e.add=function(e,r,t){return t.x=e.x+r.x,t.y=e.y+r.y,t.z=e.z+r.z,t},e.sub=function(e,r,t){return t.x=e.x-r.x,t.y=e.y-r.y,t.z=e.z-r.z,t},e.mul=function(e,r,t){return t.x=e.x*r,t.y=e.y*r,t.z=e.z*r,t},e.negate=function(e,r){return r.x=-e.x,r.y=-e.y,r.z=-e.z,r},e.norm=function(e,r){var t=e.len;if(0===t)return r.x=0,r.y=0,r.z=0,r;var n=1/t;return r.x=e.x*n,r.y=e.y*n,r.z=e.z*n,r},e.lerp=function(e,r,t,n){return n.x=e.x+(r.x-e.x)*t,n.y=e.y+(r.y-e.y)*t,n.z=e.z+(r.z-e.z)*t,n},e.dot=function(e,r){return e.x*r.x+e.y*r.y+e.z*r.z},e.cross=function(e,r,t){var n=e.x,o=e.y,a=e.z,i=r.x,u=r.y,l=r.z;return t.x=o*l-a*u,t.y=a*i-n*l,t.z=n*u-o*i,t},e}();e.vec3=r}(module_math||(module_math={})),function(e){var r=function(){function r(e){this.v=new Float32Array(16),this.data=e}return Object.defineProperty(r.prototype,"data",{get:function(){var e=this.v;return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]},set:function(e){var r=this.v;r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]},enumerable:!0,configurable:!0}),Object.defineProperty(r,"ident",{get:function(){return new r([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},enumerable:!0,configurable:!0}),r.mul=function(e,r,t){for(var n=e.data,o=r.data,a=0;a<4;a++)for(var i=0;i<4;i++){var u=4*a;t.v[u+i]=n[u]*o[i]+n[u+1]*o[i+4]+n[u+2]*o[i+8]+n[u+3]*o[i+12],0}return t},r.prototype.mul=function(e,r){var t=e.x,n=e.y,o=e.z,a=this.v;return[a[0]*t+a[1]*n+a[2]*o+a[3]*r,a[4]*t+a[5]*n+a[5]*o+a[7]*r,a[8]*t+a[9]*n+a[10]*o+a[11]*r,a[12]*t+a[13]*n+a[14]*o+a[15]*r]},r.prototype.mul0=function(e){var r=e.x,t=e.y,n=e.z,o=this.v;return[o[0]*r+o[1]*t+o[2]*n,o[4]*r+o[5]*t+o[5]*n,o[8]*r+o[9]*t+o[10]*n,o[12]*r+o[13]*t+o[14]*n]},r.prototype.mul1=function(e){var r=e.x,t=e.y,n=e.z,o=this.v;return[o[0]*r+o[1]*t+o[2]*n+o[3],o[4]*r+o[5]*t+o[5]*n+o[7],o[8]*r+o[9]*t+o[10]*n+o[11],o[12]*r+o[13]*t+o[14]*n+o[15]]},r.trans=function(e,r){return r.data=[1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,e.z,1],r},r.scale=function(e,r){return r.data=[e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1],r},r.frustum=function(e,r,t,n,o,a,i){var u=r-e,l=n-t,c=a-o;return i.data=[2*o/u,0,0,0,0,2*o/l,0,0,(r+e)/u,(n+t)/l,-(a+o)/c,-1,0,0,-a*o*2/c,0],i},r.pers=function(e,t,n,o,a){var i=n*Math.tan(e*Math.PI/360),u=i*t;return r.frustum(-u,u,-i,i,n,o,a)},r.orthographic=function(e,r,t,n,o,a,i){var u=r-e,l=n-t,c=a-o;return i.data=[2/u,0,0,0,0,2/l,0,0,0,0,-2/c,0,-(e+r)/u,-(n+t)/l,-(a+o)/c,1],i},r.look=function(r,t,n,o){var a=e.vec3.zero;e.vec3.sub(r,t,a),e.vec3.norm(a,a);var i=e.vec3.zero;e.vec3.cross(n,a,i),e.vec3.norm(i,i);var u=e.vec3.zero;return e.vec3.cross(a,i,u),e.vec3.norm(u,u),o.data=[i.x,u.x,a.x,0,i.y,u.y,a.y,0,i.z,u.z,a.z,0,-e.vec3.dot(i,r),-e.vec3.dot(u,r),-e.vec3.dot(a,r),1],o},r}();e.mat4=r}(module_math||(module_math={})),function(e){var r=function(){function e(e){this.v=new Float32Array(4),this.v[0]=e[0],this.v[1]=e[1],this.v[2]=e[2],this.v[3]=e[3]}return Object.defineProperty(e.prototype,"x",{get:function(){return this.v[0]},set:function(e){this.v[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.v[1]},set:function(e){this.v[1]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this.v[2]},set:function(e){this.v[2]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this.v[3]},set:function(e){this.v[3]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xyzw",{get:function(){return[this.v[0],this.v[1],this.v[2],this.v[3]]},set:function(e){this.v[0]=e[0],this.v[1]=e[1],this.v[2]=e[2],this.v[3]=e[3]},enumerable:!0,configurable:!0}),e.prototype.mul=function(e,r){var t=this.x,n=this.y,o=this.z,a=this.w,i=e.x,u=e.y,l=e.z,c=a*i+n*l-o*u,f=a*u+o*i-t*l,g=a*l+t*u-n*i,m=-t*i-n*u-o*l;return r.x=c*a+m*-t+f*-o-g*-n,r.y=f*a+m*-n+g*-t-c*-o,r.z=g*a+m*-o+c*-n-f*-t,r},e.prototype.mat4=function(e){var r=this.x,t=this.y,n=this.z,o=this.w,a=r+r,i=t+t,u=n+n,l=r*a,c=r*i,f=r*u,g=t*i,m=t*u,v=n*u,s=o*a,h=o*i,d=o*u;return e.data=[1-(g+v),c+d,f-h,0,c-d,1-(l+v),m+s,0,f+h,m-s,1-(l+g),0,0,0,0,1],e},Object.defineProperty(e,"ident",{get:function(){return new e([0,0,0,1])},enumerable:!0,configurable:!0}),e.inv=function(e,r){var t=e.x,n=e.y,o=e.z,a=e.w,i=t*t+n*n+o*o+a*a;if(!i)return r.x=0,r.y=0,r.z=0,r.z=0,r;var u=-(i?1/i:0);return r.x=t*u,r.y=n*u,r.z=o*u,r.w=a*u,r},e.conj=function(e,r){return r.x=-e.x,r.y=-e.y,r.z=-e.z,r.w=-e.w,r},e.norm=function(e,r){var t=e.x,n=e.y,o=e.z,a=e.w,i=Math.sqrt(t*t+n*n+o*o+a*a);if(!i)return r.x=0,r.y=0,r.z=0,r.w=0,r;var u=1/i;return r.x=t*u,r.y=n*u,r.z=o*u,r.w=a*u,r},e.mul=function(e,r,t){var n=e.x,o=e.y,a=e.z,i=e.w,u=r.x,l=r.y,c=r.z,f=r.w;return t.x=n*f+i*u+o*c-a*l,t.y=o*f+i*l+a*u-n*c,t.z=a*f+i*c+n*l-o*u,t.w=i*f-n*u-o*l-a*c,t},e.axis=function(e,r,t){r*=.5;var n=Math.sin(r);return t.x=e.x*n,t.y=e.y*n,t.z=e.z*n,t.w=Math.cos(r),t},e}();e.quat=r}(module_math||(module_math={}));var math=module_math,gl=void 0,canvas_width=0,canvas_height=0;function resize(){var e=document.getElementById("backdrop");e.width=document.body.clientWidth,e.height=document.body.clientHeight,canvas_width=e.width,canvas_height=e.height,gl=e.getContext("webgl",{alpha:!1,antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance",premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1})}var source_v="precision mediump float;attribute vec3 vertPosition;attribute vec3 vertColor;varying vec3 fragColor;uniform mat4 mWorld;uniform mat4 mView;uniform mat4 mProj;void main(){  fragColor = vertColor;  gl_Position = mProj * mView * mWorld * vec4(vertPosition, 1.0);}",source_f="precision mediump float;varying vec3 fragColor;void main(){  gl_FragColor = vec4(fragColor, 1.0);}",source_vert=new Float32Array([-1,1,-1,.5,.5,.5,-1,1,1,.5,.5,.5,1,1,1,.5,.5,.5,1,1,-1,.5,.5,.5,-1,1,1,.75,.25,.5,-1,-1,1,.75,.25,.5,-1,-1,-1,.75,.25,.5,-1,1,-1,.75,.25,.5,1,1,1,.25,.25,.75,1,-1,1,.25,.25,.75,1,-1,-1,.25,.25,.75,1,1,-1,.25,.25,.75,1,1,1,1,0,.15,1,-1,1,1,0,.15,-1,-1,1,1,0,.15,-1,1,1,1,0,.15,1,1,-1,0,1,.15,1,-1,-1,0,1,.15,-1,-1,-1,0,1,.15,-1,1,-1,0,1,.15,-1,-1,-1,.5,.5,1,-1,-1,1,.5,.5,1,1,-1,1,.5,.5,1,1,-1,-1,.5,.5,1]),source_indices=new Int16Array([0,1,2,0,2,3,5,4,6,6,4,7,8,9,10,8,10,11,13,12,14,15,14,12,16,17,18,16,18,19,21,20,22,22,20,23]),shader_v=void 0,shader_f=void 0,program=void 0,buffer_v=void 0,buffer_i=void 0,matWorldUniformLocation=void 0,matViewUniformLocation=void 0,matProjUniformLocation=void 0,angle=0;function initialize(){if(shader_v=gl.createShader(gl.VERTEX_SHADER),shader_f=gl.createShader(gl.FRAGMENT_SHADER),gl.shaderSource(shader_v,source_v),gl.shaderSource(shader_f,source_f),gl.compileShader(shader_v),gl.getShaderParameter(shader_v,gl.COMPILE_STATUS))if(gl.compileShader(shader_f),gl.getShaderParameter(shader_f,gl.COMPILE_STATUS))if(program=gl.createProgram(),gl.attachShader(program,shader_v),gl.attachShader(program,shader_f),gl.linkProgram(program),gl.getProgramParameter(program,gl.LINK_STATUS))if(gl.validateProgram(program),gl.getProgramParameter(program,gl.VALIDATE_STATUS)){buffer_v=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,buffer_v),gl.bufferData(gl.ARRAY_BUFFER,source_vert,gl.STATIC_DRAW),buffer_i=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,buffer_i),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,source_indices,gl.STATIC_DRAW);var e=gl.getAttribLocation(program,"vertPosition"),r=gl.getAttribLocation(program,"vertColor");gl.vertexAttribPointer(e,3,gl.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,0),gl.vertexAttribPointer(r,3,gl.FLOAT,!1,6*Float32Array.BYTES_PER_ELEMENT,3*Float32Array.BYTES_PER_ELEMENT),gl.enableVertexAttribArray(e),gl.enableVertexAttribArray(r),matWorldUniformLocation=gl.getUniformLocation(program,"mWorld"),matViewUniformLocation=gl.getUniformLocation(program,"mView"),matProjUniformLocation=gl.getUniformLocation(program,"mProj")}else console.error("ERROR validating program!",gl.getProgramInfoLog(program));else console.error("ERROR linking program!",gl.getProgramInfoLog(program));else console.error("ERROR compiling fragment shader!",gl.getShaderInfoLog(shader_f));else console.error("ERROR compiling vertex shader!",gl.getShaderInfoLog(shader_v))}function render(){if(void 0!==gl){gl.clearColor(.1,.1,.1,0),gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT),gl.enable(gl.DEPTH_TEST),gl.enable(gl.CULL_FACE),gl.frontFace(gl.CCW),gl.cullFace(gl.BACK),gl.useProgram(program);var e=math.mat4.ident,r=math.mat4.ident,t=math.mat4.ident,n=math.quat.ident;math.quat.axis(new math.vec3([0,1,0]),angle,n);var o=math.quat.ident;math.quat.axis(new math.vec3([1,0,0]),.25*angle,o),math.quat.mul(o,n,n),n.mat4(e),angle+=1/30,math.mat4.look(new math.vec3([0,0,-8]),new math.vec3([0,0,0]),new math.vec3([0,1,0]),r),math.mat4.pers(45,canvas_width/canvas_height,.1,1e3,t),gl.uniformMatrix4fv(matWorldUniformLocation,!1,e.data),gl.uniformMatrix4fv(matViewUniformLocation,!1,r.data),gl.uniformMatrix4fv(matProjUniformLocation,!1,t.data),gl.drawElements(gl.TRIANGLES,source_indices.length,gl.UNSIGNED_SHORT,0)}}window.onload=function(){resize(),initialize(),setInterval(function(){render()},60)},window.onresize=function(){resize()};